<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device width, initial-scale=1">
	<title>Configurateur de bineuse</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>

	<style type="text/css">
		.choix {
		}

		.cargen{
			border-bottom: 1px dashed black;
			padding-bottom: 10px;
			margin-bottom: 10px;
			margin-top: 10px;
		}

		@font-face {
			font-family: Raleway;
			src:url(font/Raleway-Regular.ttf);
		}

		.textbig {
			font-family: "Raleway";
			font-size: 28px;
			font-weight: 700;
			text-transform: uppercase;
			font-style: normal;
			text-decoration: none;
			line-height: 1.5em;
			letter-spacing: 0px;
			color: #5A5A5B;
			text-align: center;
		}

		.texttitle {
			font-family: "Raleway";
			font-size: 20px;
			font-weight: 700;
			text-transform: uppercase;
			font-style: normal;
			text-decoration: none;
			line-height: 1.5em;
			letter-spacing: 0px;
			color: #DE5B29;
			text-align: center;
		}

		.textres {
			font-family: "Raleway";
			font-weight: bold;
			font-size: 20px;
			text-align: center;
		}

		.textres2 {
			font-family: "Raleway";
			font-style: italic;
			font-size: 15px;
			text-align: center;
		}

		.imageres {
			width: 100px;
			transform: rotate(180deg);
		}

		.selectlabel {
			font-family: "Raleway";
			text-transform: uppercase;
			padding: 0;
			font-weight: bold;
			margin-top: 10px;
			text-align: center;
			margin-bottom: 0;
		}

		.selectbox {
			margin-bottom: 2px;
			margin-left: 1em;
			margin-right: 1em;
			padding: 3px;
			padding-left: 15px;
			padding-right: 15px;
			cursor: pointer;
			background-color: #DE5B29;
			color: white;
			border: solid 1px #DE5B29;
			font-family: "Raleway";
			font-size: 16px;
			font-weight: 500;
			font-style: normal;
			text-decoration: none;
			line-height: 1em;
			letter-spacing: 0px;
		}
	</style>

</head>

<body>
	<div class="col mb-3">
		<div class="textbig" id="titre1">Configurateur de bineuse</div>
		<div class="texttitle" id="titre2">Caracteristiques generales</div>
		<div class="texttitle" id="nombin">BSIR 7</div>
		<div class="row justify-content-center">
			<div class="col-5 col-sm-4 col-md-4 col-lg-3 my-auto mr-2">
				<div class="row choix">
					<label class="col-12 selectlabel" for="type" id="titre3">Type de bineuse</label>
					<select class="col selectbox" id="type" name="type">
						<option id="titre14">Fixe</option>
						<option id="titre15">Repliable</option>
					</select>
				</div>
				
				<div class="row choix">
					<label class="col-12 selectlabel" for="rang" id="titre4">Nombre de rangs</label>
					<select class="col selectbox" id="rang" name="rang">
						<option>4</option>
						<option>6</option>
						<option>7</option>
						<option>8</option>
						<option>9</option>
						<option>11</option>
						<option>12</option>
					</select>
				</div>
				
				<div class="row choix">
					<label class="col-12 selectlabel" for="ecart" id="titre5">Ecartement entre rangs</label>
					<select class="col selectbox" id="ecart" name="ecart">
						<option>450</option>
						<option>500</option>
						<option>550</option>
						<option>600</option>
						<option>700</option>
						<option>750</option>
						<option>800</option>
					</select>
				</div>

				<div class="row choix">
					<label class="col-12 selectlabel" for="coutre" id="titre6">Coutre de guidage</label>
					<select class="col selectbox" id="coutre" name="coutre">
						<option id="titre16">Sans</option>
						<option id="titre17">Avec</option>
					</select>
				</div>
			</div>
			<div class="col-4 my-auto ml-2">
				<div class="textres" id="titre7">Largeur de poutre</div>
				<div class="textres" id="largbin">4.2 m</div>
				<hr />
				<div class="textres" id="titre7b">Poids*</div>
				<div class="textres" id="poidsbin">884 kg</div>
			</div>
		</div>
		<div class="textres2 cargen" id="attprix">*Il ne s'agit que d'une estimation, cela ne correspond en rien au poids définitif.</div>
		
		<div class="texttitle" id="titre9">Choix du module</div>
		<div class="row justify-content-center">
			<div class="col-5 col-sm-4 col-md-4 col-lg-3 mr-2">
				<div class="row choix">
					<label class="col-12 selectlabel" for="nbdent" id="titre10">Nombre de dents</label>
					<select class="col selectbox" id="nbdent" name="nbdent">
						<option value="20" id="titre18">3 (Rang <= 500)</option>
						<option value="10" id="titre19">5 (Rang > 500)</option>
					</select>
				</div>
				
				<div class="row choix">
					<label class="col-12 selectlabel" for="dent" id="titre11">Type de dents</label>
					<select class="col selectbox" id="dent" name="dent">
						<option value="0" id="titre20">32x10 patte d'oie</option>
						<option value="20" id="titre21">Soc scalpeur</option>
						<option value="40" id="titre22">Lame lelièvre</option>
					</select>
				</div>
				
				<div class="row choix">
					<label class="col-12 selectlabel" for="optav" id="titre12">Option avant</label>
					<select class="col selectbox" id="optav" name="optav">
						<option value="0"></option>
						<option id="pav" value="3">Protège plant</option>
						<option id="kav" value="6">Doigt Kress</option>
					</select>
				</div>
				
				<div class="row choix">
					<label class="col-12 selectlabel" for="optar" id="titre13">Option arrière</label>
					<select class="col selectbox" id="optar" name="optar">
						<option value="0"></option>
						<option value="2" id="titre23">Herse peigne</option>
						<option id="kar" value="1">Doigt Kress</option>
					</select>
				</div>
			</div>
			<div class="col-4 ml-2">
				
				<center><img class="imageres" id="image" src="images/m23.png"></center>
			</div>
		</div>
	</div>
</body>
</html>

<script>
	$(document).ready(function(){
		var nb = 0;
		$('#rang').val(7);
		$('#ecart').val(500);
		$('#type').val('Repliable');
		$('#optav').val(3);
		$('select').on('change',function(){
			var poids = 0;
			var poidstot = 0;
			$('option').prop('disabled',false);
			var dent = parseInt($('#dent').val());
			var optav = parseInt($('#optav').val());
			var optar = parseInt($('#optar').val());
			var nbdent = parseInt($('#nbdent').val());
			var rang = parseInt($('#rang').val());
			var ecart = parseInt($('#ecart').val());
			var type = $('#type').val();
			var coutre = $('#coutre').val();
			var renable = document.querySelectorAll('[disabled]');
			for (var i = 0; i < renable.length; i++) {
				renable[i].removeAttribute('disabled');
			}
			if (type == 'Fixe') {
				document.getElementById("rang").options[5].disabled = true;
				if (rang == 11) {
					rang = 4;
					document.getElementById("rang").options[0].selected = true;
				}
				if (rang == 4) {
					if (ecart < 600) {
						document.getElementById("ecart").options[3].selected = true;
						ecart = 600;
					}
					for (var i = 0; i < 3; i++) {
						document.getElementById("ecart").options[i].disabled = true;
					}
				} else if (rang == 7 || rang == 9 || rang == 12) {
					if (ecart > 600) {
						document.getElementById("ecart").options[3].selected = true;
						ecart = 600;
					}
					for (var i = 4; i < 7; i++) {
						document.getElementById("ecart").options[i].disabled = true;
					}
				}
			} else {
				document.getElementById("rang").options[0].disabled = true;
				if (rang == 4) {
					rang = 6;
					document.getElementById("rang").options[1].selected = true;
				} else if (rang != 8) {
					document.getElementById("ecart").options[0].disabled = true;
				}
				if (rang == 6) {
					if (ecart < 700) {
						document.getElementById("ecart").options[4].selected = true;
						ecart = 700;
					}
					for (var i = 0; i < 4; i++) {
						document.getElementById("ecart").options[i].disabled = true;
					}
				} else if (rang == 7 || rang == 9) {
					if (ecart > 600) {
						document.getElementById("ecart").options[3].selected = true;
						ecart = 600;
					}
					for (var i = 4; i < 7; i++) {
						document.getElementById("ecart").options[i].disabled = true;
					}
				} else if (rang == 11) {
					if (ecart > 550) {
						document.getElementById("ecart").options[2].selected = true;
						ecart = 550;
					}
					for (var i = 3; i < 7; i++) {
						document.getElementById("ecart").options[i].disabled = true;
					}
				} else if (rang == 12) {
					if (ecart > 500) {
						document.getElementById("ecart").options[2].selected = true;
						ecart = 500;
					}
					for (var i = 2; i < 7; i++) {
						document.getElementById("ecart").options[i].disabled = true;
					}
				}
			}
			if (ecart > 550) {
				document.getElementById("nbdent").options[1].selected = true;
				nbdent = 10;
				document.getElementById("nbdent").options[0].disabled = true;
			} else if (ecart < 550) {
				document.getElementById("nbdent").options[0].selected = true;
				nbdent = 20;
				document.getElementById("nbdent").options[1].disabled = true;
			}
			if (dent == 40) {
				if (optav !== 0) {
					$('#optav').val(0);
					optav = 0;
				}
				$('#pav').prop('disabled',true);
				$('#kav').prop('disabled',true);
			} else if (optav == 6) {
				if (optar == 1) {
					$('#optar').val(0);
					optar = 0;
				}
				$('#kar').prop('disabled',true);
			}  else if (optar == 1) {
				if (optav == 6) {
					$('#optav').val(0);
					optav = 0;
				}
				$('#kav').prop('disabled',true);
			}
			nb = dent + optav + optar + nbdent;
			var image = 'images/m'+nb+'.png';
			$('#image').attr('src',image);

			if (nbdent == 10) {
				var nbd = 5;
				var dentmoins = 4;
				poids += 51.12;
				var poidsmoins = 5.37;
			} else {
				var nbd = 3;
				var dentmoins = 2;
				poids += 48.06;
				var poidsmoins = 2.31;
			}
			if (dent == 0) {
				poids += 3.4 * nbd;
				poidsmoins += 3.4 * dentmoins;
			} else if (dent == 20) {
				poids += 4.15 * nbd;
				poidsmoins += 4.15 * dentmoins;
			} else {
				if (nbd == 5) {
					poids += 22.01;
					poidsmoins += 17.86;
				} else {
					poids += 13.71;
					poidsmoins += 9.56;
				}
			}
			if (optav == 3){
				poids += 16.7;
				poidsmoins += 16.7;
			} else if (optav == 6) {
				poids += 17.15;
				poidsmoins += 17.15;
			}
			if (optar == 1) {
				poids += 22.2;
				poidsmoins += 22.2;
			} else if (optar == 2) {
				if (nbd == 5){
					poids += 9.03;
				} else {
					poids += 8.31;
				}
			}
			poids *= 100;
			poids = parseInt(poids);
			poids /= 100;
			

			var larg = ecart * rang / 100;
			larg = parseInt(larg);
			larg += 2;
			larg /= 10;
			if (type == 'Fixe' || type == 'Fija' || type == 'Fixed') {
				var rampe = [3.5,4.2,5,6,6.6,7.4];
				for (var i = 0; i < rampe.length; i++) {
					if (larg <= rampe[i]) {
						larg = rampe[i];
						i = rampe.length;
					}
				}
				if (rang == 4) {
					larg = 3.5;
				} else if (rang == 6 && ecart <= 600) {
					larg = 4.2;
				} else if ((rang == 6 && ecart > 600) || ((rang == 7 || rang == 8) && ecart <= 600)) {
					larg = 5;
				} else if (rang == 9) {
					larg = 6;
				} else if (rang == 8 && ecart > 600) {
					larg = 6.6;
				} else if (rang == 12) {
					larg = 7.4;
				}
				poidstot = parseInt(80.86 + (24.22 * larg) + ((rang + 1) * poids) - poidsmoins);
			} else {
				var rampe = [4.2,5,6,6.6];
				for (var i = 0; i < rampe.length; i++) {
					if (larg <= rampe[i]) {
						larg = rampe[i];
						i = rampe.length;
					}
				}
				if ((rang == 7 || rang == 8) && ecart <= 500) {
					larg = 4.2;
				} else if (rang == 6 || ((rang == 7 || rang == 8) && ecart > 500 && ecart < 700)) {
					larg = 5;
				} else if (rang == 9) {
					larg = 6;
				} else if ((rang == 8 && ecart >= 700) || rang == 11 || rang == 12) {
					larg = 6.6;
				}
				poidstot = parseInt(368.92 - (24.22 * (6.6 - larg)) + ((rang + 1) * poids) - poidsmoins);
			}
			if (coutre == "Avec" || coutre == 'Con' || coutre == 'With') {
				poidstot += 96.36;
				poidstot = parseInt(poidstot);
			}

			if (poidstot >= 1000){
				var mille = parseInt(poidstot/1000);
				var cent = ("000" + (poidstot - (mille * 1000))).slice(-3);
				$('#poidsbin').text(mille + ' ' + cent + ' kg');
			} else {
				$('#poidsbin').text(poidstot + ' kg');
			}

			$('#largbin').text(larg+' m');
			
			if (type == 'Fixe') {
				if (rang == 4 || (ecart >=600 && (rang == 6 || rang == 8))) {
					$('#nombin').text('BLI ' + rang);
				} else {
					if (rang == 7) {
						$('#nombin').text('BMI ' + rang + ' ou BSI ' + rang);
					} else if (rang == 9) {
						$('#nombin').text('BMI ' + rang);
					} else {
						$('#nombin').text('BSI ' + rang);
					}
				}
			} else {
				if (ecart >=700) {
					$('#nombin').text('BLIR ' + rang);
				} else {
					if ((rang == 7 || rang == 8) && ecart > 500) {
						$('#nombin').text('BMIR ' + rang);
					} else if ((rang == 7 || rang == 8)) {
						$('#nombin').text('BSIR ' + rang);
					} else if (rang == 12) {
						$('#nombin').text('BSIR ' + rang);
					} else {
						$('#nombin').text('BMIR ' + rang);
					}
				}				
			}
		});
	});
</script>
